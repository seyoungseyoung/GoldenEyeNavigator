# GoldenLife Navigator: 당신의 AI 금융 어드바이저

**GoldenLife Navigator**는 사용자의 투자 성향과 재무 목표에 맞춰, AI가 개인화된 투자 전략을 추천하고 시장 분석 및 안정적인 매매 타이밍 신호를 제공하는 차세대 금융 어드바이저 웹 애플리케이션입니다. 복잡한 금융 데이터를 AI가 분석하여, 누구나 쉽게 이해하고 실행할 수 있는 명확한 가이드를 제시하는 것을 목표로 합니다.

![GoldenLife Navigator Screenshot](https://placehold.co/800x450.png?text=GoldenLife+Navigator+UI)
*<p align="center">실제 애플리케이션 데모 UI (참고용 이미지)</p>*

---

## ✨ 주요 기능 상세 설명

### 1. 🤖 맞춤형 투자 전략 설문 (`/survey`)

사용자로부터 10가지 핵심 질문에 대한 답변을 받아, 이를 기반으로 AI가 개인에게 최적화된 투자 포트폴리오를 생성합니다.

-   **10가지 핵심 질문**: 사용자는 은퇴 준비 기간, 목표 소득, 자산 규모, 위험 감수 수준, 선호 투자 테마 등 10가지 질문으로 구성된 설문에 답변합니다. 이 질문들은 사용자의 재무 상태와 투자 성향을 다각도로 파악하기 위해 설계되었습니다.
-   **AI 포트폴리오 생성**: 사용자가 제출한 답변은 HyperClova X AI 모델로 전달됩니다. AI는 이 정보를 종합적으로 분석하여 개인에게 가장 적합한 자산 배분(주식, 채권, 현금 비율), 추천 종목, 운용 전략 등을 포함하는 맞춤형 투자 포트폴리오를 JSON 형식으로 생성합니다.
-   **안정적인 결과 확인**: 전략 생성이 완료되면, 결과는 `localStorage`에 저장되고 사용자는 결과 페이지(`/strategy`)로 안전하게 이동합니다. 이동이 완료된 후에 "전략 생성 완료" 알림이 표시되어, 사용자는 혼란 없이 일관된 경험을 할 수 있습니다.

### 2. 📊 내 전략 확인 (`/strategy`)

AI가 생성한 맞춤 전략을 다양한 시각 자료와 상세한 설명으로 명확하게 확인할 수 있는 개인 대시보드 페이지입니다.

-   **자산 배분 시각화**: 추천된 '주식', '채권', '현금' 비중을 보여주는 동적 파이 차트를 통해 포트폴리오의 전체 구조를 한눈에 파악할 수 있습니다.
-   **AI 추천 종목**: AI가 사용자의 성향에 맞춰 선정한 3~4개의 추천 ETF 및 주식 종목(티커)과 함께, **각 종목을 추천하는 구체적인 이유**를 명확하게 제시하여 사용자의 이해를 돕습니다.
-   **거래 전략 및 설명**: 포트폴리오를 어떤 방식으로 운용해야 하는지에 대한 '거래 전략'과, AI가 이러한 전략을 추천하게 된 근거를 상세히 설명하는 '전략 설명'을 제공하여 투자 결정에 확신을 더합니다.
-   **AI 시장 해설 및 인사이트**: 사용자가 현재 관심 있는 시장 뉴스나 경제 동향에 대한 텍스트를 입력하면, AI가 이를 '시장 요약', '제안 조치', '근거' 세 부분으로 나누어 깊이 있는 분석 결과를 제공합니다. 이를 통해 사용자는 자신의 포트폴리오와 현재 시장 상황을 연관지어 생각해볼 수 있습니다.

### 3. ⏱️ AI 매매 타이밍 분석 (`/timing`)

안정성과 정확성을 극대화하기 위해 설계된 **다단계 분석 프로세스**를 통해 신뢰도 높은 매매 신호를 제공합니다.

-   **1단계: 사용자 입력 우선 처리**: 사용자가 입력한 종목명 또는 티커로 먼저 주가 데이터 조회를 시도합니다. 이는 사용자의 명확한 의도를 최우선으로 존중하여, AI의 불필요한 개입으로 인한 오류 가능성을 원천적으로 차단합니다.
-   **2단계: AI 티커 변환 (필요시)**: 1단계 조회에 실패했을 경우에만 (즉, 사용자가 '애플'처럼 회사명을 입력했을 가능성이 높을 때), HyperClova X AI가 사용자 입력을 가장 가능성이 높은 야후 파이낸스 티커(예: 'AAPL')로 변환합니다. 변환된 티커의 유효성을 다시 한번 주가 데이터 조회로 검증하여, 잘못된 티커로 분석이 진행되는 것을 방지합니다.
-   **3단계: AI 기술 지표 추천**: 검증된 티커와 해당 종목의 과거 1년치 주가 데이터를 기반으로, AI는 현재 시장 상황과 사용자가 입력한 매매 전략에 가장 적합하다고 판단하는 **3가지 기술 지표(예: RSI, MACD)와 최적의 매개변수**를 추천합니다.
-   **4단계: 최종 신호 생성 및 시각화**: 애플리케이션은 AI가 추천한 지표들을 실제로 계산하여 과거 데이터에 대한 매수/매도 신호를 생성합니다. 이 신호들을 종합하여 **"강한 매수", "매수", "보류", "매도", "강한 매도"** 5단계의 명확한 최신 매매 신호를 제시합니다. 과거 1년간의 주가 차트 위에 매수(초록색 삼각형)/매도(빨간색 삼각형) 신호가 아이콘으로 함께 표시되며, 가장 최신 신호에는 AI의 분석 코멘트가 툴팁으로 제공되어 깊이 있는 이해를 돕습니다.

### 4. 📧 이메일 구독 및 자동 알림

-   **이메일 구독**: '매매 타이밍 분석' 페이지에서 분석이 완료된 종목에 대해, 향후 매매 신호 발생 시 알림을 받도록 이메일을 등록할 수 있습니다.
-   **환영 메일**: 구독 신청 시, 분석에 사용될 기술 지표들을 안내하는 환영 메일이 즉시 발송되어 사용자에게 긍정적인 경험을 제공합니다.
-   **자동 분석 및 알림**: 서버는 매일 **한국 표준시(KST) 오전 5시**에 모든 구독 종목의 신호를 자동으로 재분석하여, 신호가 '보류'가 아닐 경우에만 구독자에게 이메일로 알림을 보냅니다.

---

## 🛠️ 기술 스택 및 아키텍처

-   **프론트엔드**:
    -   [**Next.js**](https://nextjs.org/) - React 프레임워크 (App Router 기반의 최신 아키텍처)
    -   [**React**](https://react.dev/) - 사용자 인터페이스 구축
    -   [**TypeScript**](https://www.typescriptlang.org/) - 코드 안정성 및 유지보수성 확보
    -   [**Tailwind CSS**](https://tailwindcss.com/) - 유틸리티 우선 방식의 CSS 프레임워크
    -   [**ShadCN/UI**](https://ui.shadcn.com/) - 재사용 가능하고 접근성 높은 UI 컴포넌트 라이브러리
    -   [**Recharts**](https://recharts.org/) - 주가 및 자산 배분 차트 시각화
-   **백엔드 & AI**:
    -   [**HyperClova X**](https://clovastudio.ncloud.com/) - 핵심 투자 전략 수립 및 시장 분석을 위한 Naver의 강력한 LLM
    -   **Next.js Server Actions** - 프론트엔드와 백엔드 간의 원활하고 안전한 통신 (AI 플로우 호출)
    -   [**Nodemailer**](https://nodemailer.com/) - 이메일 발송을 위한 검증된 모듈
-   **데이터 소스**:
    -   [**Axios**](https://axios-http.com/) - 야후 파이낸스 API 직접 호출을 통한 안정적인 주가 데이터 조회 (외부 라이브러리 의존성 최소화)
    -   **JSON 파일 (`/src/data/subscriptions.json`)** - 이메일 구독자 정보 저장을 위한 간단한 로컬 데이터베이스
-   **안정성 및 복원력 (Stability & Resilience)**:
    -   **API 자동 재시도**: HyperClova X API 호출 실패 시, 최대 3회까지 **자동 재시도 로직**을 구현하여 일시적인 네트워크 오류나 API 불안정성에 효과적으로 대응합니다.
    -   **단계별 검증 프로세스**: '매매 타이밍 분석' 기능은 **[사용자 입력 직접 조회] → [AI 티커 변환] → [변환된 티커 재조회] → [AI 지표 분석]**의 각 단계를 순차적으로 검증합니다. 이를 통해 프로세스 중단 없이 사용자에게 명확한 피드백과 사용자 친화적인 오류 메시지를 제공하여 시스템의 안정성을 극대화했습니다.

---

## ⚙️ 프로젝트 구조

```
/
├── public/                 # 정적 파일 (이미지 등)
├── src/
│   ├── ai/
│   │   └── flows/          # AI 핵심 로직 (HyperClova X 호출)
│   │       ├── investment-strategy-generator.ts # 맞춤 투자 전략 생성
│   │       ├── market-insight-analyzer.ts     # 시장 뉴스 분석
│   │       ├── stock-signal-generator.ts      # 매매 신호 분석 (지표 추천)
│   │       ├── ticker-converter.ts            # 회사명 -> 티커 변환
│   │       └── subscribeToSignals.ts          # 이메일 구독 처리
│   ├── app/                # Next.js App Router (페이지 및 레이아웃)
│   ├── components/         # React 컴포넌트
│   │   ├── layout/         # Header, Footer 등 레이아웃 컴포넌트
│   │   ├── strategy/       # '내 전략' 페이지 관련 컴포넌트
│   │   ├── survey/         # '설문' 페이지 관련 컴포넌트
│   │   ├── timing/         # '매매 타이밍' 페이지 관련 컴포넌트
│   │   └── ui/             # ShadCN/UI 기본 컴포넌트
│   ├── data/
│   │   └── subscriptions.json # 이메일 구독자 정보 저장
│   ├── hooks/              # 커스텀 React Hooks (useToast, useMobile)
│   ├── lib/                # 유틸리티 함수 (cn 등)
│   └── services/           # 외부 서비스 연동 로직
│       ├── emailService.ts # Nodemailer 설정 및 이메일 발송
│       ├── hyperclova.ts   # HyperClova X API 호출 클라이언트 (자동 재시도 로직 포함)
│       ├── indicatorService.ts # 기술적 지표 계산 로직
│       ├── stockService.ts # 야후 파이낸스 주식 데이터 조회 (Axios 기반)
│       └── subscriptionService.ts # 구독자 정보(JSON) CRUD
├── .env                    # 환경 변수 설정 파일 (API 키 등)
└── ...
```

---

## 🚀 시작하기

### 1. 사전 준비
-   [Node.js](https://nodejs.org/en) (v18 이상 권장)
-   [pnpm](https://pnpm.io/installation) (또는 npm, yarn)

### 2. 프로젝트 클론 및 의존성 설치
```bash
git clone <repository_url>
cd GoldenLifeNavigator
pnpm install
```

### 3. 환경 변수 설정
프로젝트 루트 디렉토리에 `.env` 파일을 생성하고 아래 내용을 실제 값으로 채워넣으세요.

```env
# HyperClova X API Keys
# 네이버 클라우드 플랫폼에서 발급받은 API 정보를 입력하세요.
HYPERCLOVA_API_KEY="여기에_발급받은_API_키를_입력하세요"
HYPERCLOVA_REQUEST_ID="여기에_요청_ID를_입력하세요"

# Gmail SMTP for Nodemailer
# 이메일 발송을 위한 Gmail 계정 정보입니다.
# Gmail 사용 시, 계정 설정에서 2단계 인증을 활성화하고 '앱 비밀번호'를 생성하여 사용해야 합니다.
SMTP_SERVER="smtp.gmail.com"
SMTP_PORT=587
SMTP_USERNAME="your-email@gmail.com"
SMTP_PASSWORD="your_gmail_app_password"

# CRON Job Secret
# 외부 스케줄러가 /api/cron 엔드포인트를 호출할 때 사용할 비밀 키입니다.
CRON_SECRET="여기에_아무도_추측할_수_없는_비밀_문자열을_입력하세요"
```

### 4. 개발 서버 실행
아래 명령어를 실행하여 개발 서버를 시작합니다.
```bash
pnpm run dev
```
서버가 성공적으로 시작되면, 브라우저에서 `http://localhost:9002` 로 접속하여 애플리케이션을 확인할 수 있습니다.

---

## 🤝 기여 방법
이 프로젝트에 기여하고 싶으시다면 언제든지 환영합니다. 버그 리포트, 기능 제안 등은 GitHub 이슈를 통해 남겨주세요. Pull Request를 보내주시면 더욱 좋습니다.
```